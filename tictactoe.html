<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>rktechgame - Tic Tac Toe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Google Font Orbitron -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    :root {
      --prim: #66fcf1;
      --bg-start: #546285;
      --bg-end: #cfd2dc;
      --panel-bg: #f0f4faee;
      --text-dark: #232a36;
      --accent: #db1d29;
      --shadow: #292a3644;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Montserrat', Arial, sans-serif;
      background: linear-gradient(120deg, var(--bg-start) 20%, var(--bg-end) 100%);
      color: var(--text-dark);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      user-select: none;
      padding-bottom: 80px;
    }
    .container {
      background: var(--panel-bg);
      max-width: 380px;
      width: 90vw;
      padding: 32px 28px 28px;
      border-radius: 22px;
      box-shadow: 0 0 42px var(--shadow);
      text-align: center;
    }
    h1 {
      font-size: 2.8rem;
      color: var(--accent);
      margin: 0 0 20px;
      font-weight: 900;
      letter-spacing: 5px;
      text-shadow: 0 0 20px var(--accent);
      user-select: none;
    }
    #board {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      aspect-ratio: 1;
      margin-bottom: 24px;
    }
    button.cell {
      background: linear-gradient(180deg, #233142 0%, #1b2838 100%);
      border-radius: 20px;
      border: 2px solid rgba(102,252,241,0.25);
      box-shadow: 0 15px 30px rgba(0,0,0,0.3), 0 0 14px rgba(0,255,255,0.15) inset;
      font-size: 3.5rem;
      font-weight: 900;
      color: #a1f5f9;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: transform 0.1s ease, box-shadow 0.25s ease;
      user-select: none;
    }
    button.cell:hover:enabled {
      background: linear-gradient(180deg, #2e4366 0%, #1c3150 100%);
      transform: translateY(-4px);
      box-shadow: 0 15px 45px rgba(0,255,255,0.45);
    }
    button.cell:disabled {
      cursor: default;
      color: #4a6a85;
    }
    button.cell.win {
      background: radial-gradient(circle at center, #ffd700 0%, #a77c00 60%);
      color: #553900;
      border-color: #ffd700;
      box-shadow: 0 0 32px #ffd700, 0 0 56px #ff9600;
    }
    #status {
      font-size: 1.6rem;
      font-weight: 700;
      color: var(--accent);
      min-height: 36px;
      user-select: none;
      margin-bottom: 28px;
      text-shadow: 0 0 16px var(--accent);
    }
    button#resetBtn, button#homeBtn {
      font-family: 'Montserrat', Arial, sans-serif;
      border: none;
      padding: 14px 32px;
      font-size: 1.3rem;
      border-radius: 30px;
      cursor: pointer;
      color: white;
      font-weight: 700;
      margin: 0 10px;
      text-shadow: 0 0 10px rgba(0,0,0,0.4);
      box-shadow: 0 0 26px var(--shadow);
      transition: background 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
    }
    button#resetBtn {
      background: linear-gradient(90deg, var(--bg-start), var(--accent));
    }
    button#resetBtn:hover {
      background: linear-gradient(90deg, #0072ff, #ff0033);
      box-shadow: 0 0 44px #ff0033;
    }
    button#homeBtn {
      background: linear-gradient(90deg, #ff5722, #ff0033);
    }
    button#homeBtn:hover {
      background: linear-gradient(90deg, #ff2c00, #c40000);
      box-shadow: 0 0 44px #c40000;
    }
    @media (max-width: 460px) {
      #board {
        gap: 12px;
      }
      button.cell {
        font-size: 3rem;
      }
      button#resetBtn, button#homeBtn {
        font-size: 1.1rem;
        padding: 12px 28px;
      }
    }

    /* Social icons area fixed bottom */
    #social-links {
      position: fixed;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 32px;
      user-select: none;
      opacity: 0;
      transition: opacity 0.35s ease;
      z-index: 11;
    }
    #social-links.visible {
      opacity: 1;
    }
    #social-links a {
      text-decoration: none;
      color: var(--accent);
      font-size: 2.8rem;
      text-shadow: 0 0 12px var(--accent);
      transition: color 0.3s ease;
    }
    #social-links a:hover {
      color: #ff7855;
    }
  </style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="title">
    <h1 id="title">Tic Tac Toe AI</h1>
    <div id="status" aria-live="polite">Player X's Turn</div>
    <div id="board" role="grid" aria-label="Tic Tac Toe board">
      <!-- Buttons dynamically created -->
    </div>
    <div>
      <button id="resetBtn" aria-label="Restart game">Restart</button>
      <button id="homeBtn" aria-label="Back to Homepage">Home</button>
    </div>
  </div>

  <div id="social-links" aria-label="Social media links" role="region">
    <a href="https://www.instagram.com/_satan_12.12" target="_blank" aria-label="Instagram">
      <i class="fab fa-instagram"></i>
    </a>
    <a href="https://t.me/rktechgame" target="_blank" aria-label="Telegram">
      <i class="fab fa-telegram"></i>
    </a>
  </div>

  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script>
    const boardEl = document.getElementById('board');
    const statusEl = document.getElementById('status');
    const resetBtn = document.getElementById('resetBtn');
    const homeBtn = document.getElementById('homeBtn');
    const socialLinks = document.getElementById('social-links');

    let board = Array(9).fill('');
    let gameActive = true;
    let currentPlayer = 'X';

    function renderBoard() {
      boardEl.innerHTML = '';
      board.forEach((cell, idx) => {
        const btn = document.createElement('button');
        btn.classList.add('cell');
        btn.setAttribute('role', 'gridcell');
        btn.setAttribute('aria-label', `Cell ${idx + 1}`);
        btn.disabled = !gameActive || cell !== '';
        btn.textContent = cell;
        btn.addEventListener('click', () => handlePlayerMove(idx, btn));
        boardEl.appendChild(btn);
      });
    }

    function bestMove() {
      let bestScore = -Infinity;
      let move = -1;
      for (let i = 0; i < board.length; i++) {
        if (board[i] === '') {
          board[i] = 'O';
          let score = minimax(board, 0, false);
          board[i] = '';
          if (score > bestScore) {
            bestScore = score;
            move = i;
          }
        }
      }
      return move;
    }

    const scores = {
      O: 10,
      X: -10,
      tie: 0
    };

    function minimax(newBoard, depth, isMaximizing) {
      let result = checkWinner(newBoard);
      if (result !== null) {
        return scores[result];
      }
      if (isMaximizing) {
        let bestScore = -Infinity;
        for (let i = 0; i < newBoard.length; i++) {
          if (newBoard[i] === '') {
            newBoard[i] = 'O';
            let score = minimax(newBoard, depth + 1, false);
            newBoard[i] = '';
            bestScore = Math.max(score, bestScore);
          }
        }
        return bestScore;
      } else {
        let bestScore = Infinity;
        for (let i = 0; i < newBoard.length; i++) {
          if (newBoard[i] === '') {
            newBoard[i] = 'X';
            let score = minimax(newBoard, depth + 1, true);
            newBoard[i] = '';
            bestScore = Math.min(score, bestScore);
          }
        }
        return bestScore;
      }
    }

    function checkWinner(bd) {
      const winningCombos = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
      for (let [a,b,c] of winningCombos) {
        if (bd[a] && bd[a] === bd[b] && bd[b] === bd[c]) {
          return bd[a];
        }
      }
      if (bd.every(cell => cell !== '')) return 'tie';
      return null;
    }

    function handlePlayerMove(index, btn) {
      if (!gameActive || board[index] !== '') return;
      board[index] = 'X';
      btn.textContent = 'X';
      btn.disabled = true;

      let result = checkWinner(board);
      if (result) {
        endGame(result);
        return;
      }
      statusEl.textContent = "Computer's Turn";

      setTimeout(() => {
        let aiMove = bestMove();
        if (aiMove !== -1) {
          board[aiMove] = 'O';
          renderBoard();
        }
        let result = checkWinner(board);
        if (result) {
          endGame(result);
          return;
        }
        statusEl.textContent = "Player X's Turn";
      }, 600);
    }

    function endGame(winner) {
      gameActive = false;
      renderBoard();
      if (winner === 'tie') {
        statusEl.textContent = "It's a tie!";
      } else if (winner === 'X') {
        statusEl.textContent = "You win! ðŸŽ‰";
      } else {
        statusEl.textContent = "Computer wins! ðŸ’»";
      }
      if(winner !== 'tie'){
        highlightWin(winner);
      }
      socialLinks.classList.add('visible');
    }

    function highlightWin(winner) {
      const winningCombos = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
      for (let combo of winningCombos) {
        const [a,b,c] = combo;
        if(board[a] === winner && board[b] === winner && board[c] === winner){
          const cells = boardEl.children;
          cells[a].classList.add('win');
          cells[b].classList.add('win');
          cells[c].classList.add('win');
          break;
        }
      }
    }

    resetBtn.addEventListener('click', () => {
      board = Array(9).fill('');
      gameActive = true;
      currentPlayer = 'X';
      statusEl.textContent = "Player X's Turn";
      renderBoard();
      socialLinks.classList.remove('visible');
      [...document.querySelectorAll('.cell.win')].forEach(el => el.classList.remove('win'));
    });

    homeBtn.addEventListener('click', () => {
      window.location.href = 'index.html'; // change if homepage filename is different
    });

    renderBoard();
  </script>
</body>
</html>
